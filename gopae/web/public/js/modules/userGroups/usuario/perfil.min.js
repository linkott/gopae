$(document).ready(function(){$("#user-groups-password-form").on("submit",function(a){a.preventDefault();changePassword($(this))});$("#user-groups-contact-form").on("submit",function(a){a.preventDefault();contactData($(this))});$("#UserGroupsUser_twitter").bind("keyup blur",function(){keyTwitter(this,false)});$("#UserGroupsUser_email").bind("keyup blur",function(){keyEmail(this,false)});$("#UserGroupsUser_telefono").bind("keyup blur",function(){keyNum(this,false)});$("#UserGroupsUser_telefono_celular").bind("keyup blur",function(){keyNum(this,false)})});function changePassword(b){var d=$("#UserGroupsUser_old_password").val();var i=$("#UserGroupsUser_password").val();var f=$("#UserGroupsUser_password_confirm").val();var c=howStrength(i);var e="";var a="error";var g="resultado";var h=hasError();if(h){$("html, body").animate({scrollTop:0},"fast");$("#UserGroupsUser_password").focus();switch(h){case 1:e="La Clave debe Tener al Menos 6 Caracteres.";break;case 2:e="No Coinciden La Clave y su Confirmación.";break}displayDialogBox(g,a,e)}else{if(c=="Débil"){$("#mensaje-confirm").html("<b>Su Clave es Débil.</b><br/><br/>¿Confirma el cambio de clave?")}else{if(d==i){$("#mensaje-confirm").html("<b>Su Clave nueva es igual a la Clave Anterior</b><br/><br/>¿Confirma el cambio de clave?")}else{$("#mensaje-confirm").html("¿Confirma el cambio de clave?")}}$("#dialog-passwd").removeClass("hide").dialog({width:400,resizable:false,modal:true,title:"<div class='widget-header'><h4 class='smaller blue'><i class='icon-exchange'></i> Cambio de Clave </h4></div>",title_html:true,buttons:[{html:"<i class='icon-arrow-left bigger-110'></i>&nbsp; Cancelar","class":"btn btn-danger btn-xs",click:function(){$(this).dialog("close")}},{html:"Aceptar &nbsp;<i class='icon-exchange bigger-110'></i>","class":"btn btn-primary btn-xs",click:function(){var m="resultado";var l="/perfil";var o=$("#user-groups-password-form").serialize();var r=true;var k=true;var j="POST";var n="html";var p=null;var q=function(){$("#UserGroupsUser_old_password").val("");$("#UserGroupsUser_password").val("");$("#UserGroupsUser_password_confirm").val("")};$("html, body").animate({scrollTop:0},"fast");executeAjax(m,l,o,r,k,j,n,q);$(this).dialog("close")}}],close:function(){$("#dialog-passwd").addClass("hide")}})}}function hasError(){var d=$("#UserGroupsUser_old_password").val();var b=$("#UserGroupsUser_password").val();var a=$("#UserGroupsUser_password_confirm").val();var c=0;if(d.length>0&&b.length>0&&a.length>0){if(b.length>=6){var e=howStrength(b);if(b!=a){c=2}}else{c=1}}return c}function howStrength(d){var e=false;var c=new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$","g");var b=new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$","g");var a=new RegExp("(?=.{6,}).*","g");if(d.length==0){e=false}else{if(c.test(d)){e="Fuerte"}else{if(b.test(d)){e="Media"}else{e="Débil"}}}return e}function contactData(){var e="";var c="error";var f="resultado-contacto";var j=hasErrorContactData();if(j.length>0){var e=j;displayDialogBox(f,c,e)}else{var f="resultado-contacto";var d="/perfil/contacto";var h=$("#user-groups-contact-form").serialize();var l=true;var b=true;var a="POST";var g="html";var i=null;var k=null;executeAjax(f,d,h,l,b,a,g,k)}$("html, body").animate({scrollTop:0},"fast")}function hasErrorContactData(){var c=$("#UserGroupsUser_email").val();var a=$("#UserGroupsUser_telefono").val();var b=$("#UserGroupsUser_telefono_celular").val();var d=$("#UserGroupsUser_twitter").val();var e=new String("");if(!isValidPhone(a,"fijo")){e="- El teléfono fijo debe contener el código de área y tener 10 u 11 dígitos. Ej.1: 02563641666. Ej.2: 2563641666."}if(!isValidPhone(b,"movil")&&b.length>0){if(e.length>0){e+="<br/>"}e+="- El teléfono móvil debe contener el código de la operadora y tener 10 u 11 dígitos. Ej.1: 04161234567. Se permiten los códigos 0416, 0426, 0414, 0424 y 0412."}if(!isValidTwitter(d)&&d.length>0){if(e.length>0){e+="<br/>"}e+='- El twitter debe comenzar con el caracter "@". Ej.: @miTwitter.'}return e};